{"ast":null,"code":"var _jsxFileName = \"/Users/david/Desktop/sshBMSTU/bmstu_softwareDev/backend/front/src/components/Login.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport BackendService from '../services/BackendService';\nimport Utils from \"../Utils/Utils\";\nimport { useNavigate } from \"react-router-dom\";\nimport { connect, useDispatch } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const [formData, setFormData] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  const [loggingIn, setLoggingIn] = useState(false);\n  const [submitted, setSubmitted] = useState(false); // const [ errorMessage, setErrorMessage ] = useState(null);\n\n  const nav = useNavigate();\n  const dispatch = useDispatch();\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoggingIn(true);\n    setSubmitted(true); // setErrorMessage(null);\n\n    const {\n      username,\n      password\n    } = formData;\n    BackendService.login(username, password).then(resp => {\n      console.log(resp.data);\n      dispatch(userActions.login(resp.data));\n      Utils.saveUser(resp.data);\n      setLoggingIn(false);\n      nav(\"/home\");\n    }).catch(err => {// if (err.response && err.response.status === 401)\n      //     setErrorMessage(\"Ошибка авторизации\");\n      // else setErrorMessage(err.message);\n      // setLoggingIn(false);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-md-6 me-0\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u0412\\u0445\\u043E\\u0434\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      name: \"form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"username\",\n          children: \"\\u041B\\u043E\\u0433\\u0438\\u043D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: 'form-control' + (submitted && !formData.username ? ' is-invalid' : ''),\n          name: \"username\",\n          value: formData.username,\n          onChange: e => setFormData({ ...formData,\n            username: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this), submitted && !formData.username && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"help-block text-danger\",\n          children: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 57\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: 'form-control' + (submitted && !formData.password ? ' is-invalid' : ''),\n          name: \"password\",\n          value: formData.password,\n          onChange: e => setFormData({ ...formData,\n            password: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this), submitted && !formData.password && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"help-block text-danger\",\n          children: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group mt-2\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          children: [loggingIn && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"spinner-border spinner-border-sm\",\n            role: \"status\",\n            \"aria-hidden\": \"true\",\n            children: \" \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 39\n          }, this), \"\\u0412\\u0445\\u043E\\u0434\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"pyI2KtQhrcCNw2MCyBTQE99XCjU=\", false, function () {\n  return [useNavigate, useDispatch];\n});\n\n_c = Login;\nexport default connect()(Login);\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","BackendService","Utils","useNavigate","connect","useDispatch","Login","formData","setFormData","username","password","loggingIn","setLoggingIn","submitted","setSubmitted","nav","dispatch","handleSubmit","e","preventDefault","login","then","resp","console","log","data","userActions","saveUser","catch","err","target","value"],"sources":["/Users/david/Desktop/sshBMSTU/bmstu_softwareDev/backend/front/src/components/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport BackendService from '../services/BackendService';\nimport Utils from \"../Utils/Utils\";\n\nimport { useNavigate } from \"react-router-dom\";\nimport {connect, useDispatch} from \"react-redux\";\n\nconst Login = () => {\n    const [formData, setFormData] = useState({\n        username: \"\",\n        password: \"\"\n    });\n    const [loggingIn, setLoggingIn] = useState(false);\n    const [submitted, setSubmitted] = useState(false);\n    // const [ errorMessage, setErrorMessage ] = useState(null);\n    const nav = useNavigate();\n    const dispatch = useDispatch();\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        setLoggingIn(true);\n        setSubmitted(true);\n        // setErrorMessage(null);\n        const { username, password } = formData;\n        BackendService.login(username, password)\n            .then(resp => {\n                console.log(resp.data);\n                dispatch(userActions.login(resp.data));\n                Utils.saveUser(resp.data);\n                setLoggingIn(false);\n                nav(\"/home\");\n            })\n            .catch(err => {\n                // if (err.response && err.response.status === 401)\n                //     setErrorMessage(\"Ошибка авторизации\");\n                // else setErrorMessage(err.message);\n                // setLoggingIn(false);\n            })\n    }\n\n    return (\n        <div className=\"col-md-6 me-0\">\n            {/*{*/}\n            {/*    errorMessage &&*/}\n            {/*    <div className=\"alert alert-danger mt-1 me-0 ms-0\">{errorMessage}</div>*/}\n            {/*}*/}\n            <h2>Вход</h2>\n            <form name=\"form\" onSubmit={handleSubmit}>\n                <div className=\"form-group\">\n                    <label htmlFor=\"username\">Логин</label>\n                    <input type=\"text\" className={'form-control' + (submitted && !formData.username ? ' is-invalid' : '')}\n                           name=\"username\" value={formData.username}\n                           onChange={(e) => setFormData({ ...formData, username: e.target.value })} />\n                    {submitted && !formData.username && <div className=\"help-block text-danger\">Введите имя пользователя</div>}\n                </div>\n                <div className=\"form-group\">\n                    <label htmlFor=\"password\">Пароль</label>\n                    <input type=\"password\" className={'form-control' + (submitted && !formData.password ? ' is-invalid' : '')}\n                           name=\"password\" value={formData.password}\n                           onChange={(e) => setFormData({ ...formData, password: e.target.value })} />\n                    {submitted && !formData.password &&\n                    <div className=\"help-block text-danger\">Введите пароль</div>\n                    }\n                </div>\n                <div className=\"form-group mt-2\">\n                    <button className=\"btn btn-primary\">\n                        {loggingIn && <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"> </span>}\n                        Вход\n                    </button>\n                </div>\n            </form>\n        </div>\n    );\n};\n\nexport default connect()(Login);"],"mappings":"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"},"metadata":{},"sourceType":"module"}