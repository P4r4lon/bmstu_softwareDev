{"ast":null,"code":"var _jsxFileName = \"/Users/david/Desktop/sshBMSTU/bmstu_softwareDev/backend/front/src/components/Login.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport BackendService from '../services/BackendService';\nimport Utils from \"../Utils/Utils\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [loggingIn, setLoggingIn] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [error_message, setErrorMessage] = useState(null);\n  const nav = useNavigate();\n\n  function handleChangeLogin(e) {\n    setUsername(e.target.value);\n  }\n\n  function handleChangePassword(e) {\n    setPassword(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setSubmitted(true);\n    setErrorMessage(null);\n    setLoggingIn(true);\n    BackendService.login(username, password).then(resp => {\n      console.log(resp.data);\n      Utils.saveUser(resp.data);\n      setLoggingIn(false);\n      nav(\"/home\");\n    }).catch(err => {\n      if (err.response && err.response.status === 401) setErrorMessage(\"Ошибка авторизации\");else setErrorMessage(err.message);\n      setLoggingIn(false);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-md-6 me-0\",\n    children: [error_message && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger mt-1 me-0 ms-0\",\n      children: error_message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u0412\\u0445\\u043E\\u0434\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      name: \"form\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"username\",\n          children: \"\\u041B\\u043E\\u0433\\u0438\\u043D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: 'form-control' + (submitted && !username ? ' is-invalid' : ''),\n          name: \"username\",\n          value: username,\n          onChange: handleChangeLogin\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 21\n        }, this), submitted && !username && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"help-block text-danger\",\n          children: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043C\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 48\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          className: 'form-control' + (submitted && !password ? ' is-invalid' : ''),\n          name: \"password\",\n          value: password,\n          onChange: handleChangePassword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), submitted && !password && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"help-block text-danger\",\n          children: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 48\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group mt-2\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          children: [loggingIn && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"spinner-border spinner-border-sm\",\n            role: \"status\",\n            \"aria-hidden\": \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 39\n          }, this), \"\\u0412\\u0445\\u043E\\u0434\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"ta6RI48O8YNRBNJesaRoyDUVQtI=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","BackendService","Utils","useNavigate","Login","username","setUsername","password","setPassword","loggingIn","setLoggingIn","submitted","setSubmitted","error_message","setErrorMessage","nav","handleChangeLogin","e","target","value","handleChangePassword","handleSubmit","preventDefault","login","then","resp","console","log","data","saveUser","catch","err","response","status","message"],"sources":["/Users/david/Desktop/sshBMSTU/bmstu_softwareDev/backend/front/src/components/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport BackendService from '../services/BackendService';\nimport Utils from \"../Utils/Utils\";\n\nimport { useNavigate } from \"react-router-dom\";\n\n\nexport default function Login() {\n\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [loggingIn, setLoggingIn] = useState(false);\n    const [submitted, setSubmitted] = useState(false);\n    const [error_message, setErrorMessage] = useState(null);\n    const nav = useNavigate();\n\n    function handleChangeLogin(e) {\n        setUsername(e.target.value);\n    }\n    function handleChangePassword(e) {\n        setPassword(e.target.value);\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        setSubmitted(true);\n        setErrorMessage(null);\n        setLoggingIn(true);\n\n        BackendService.login(username, password)\n            .then((resp) => {\n                console.log(resp.data);\n                Utils.saveUser(resp.data);\n                setLoggingIn(false);\n                nav(\"/home\");\n            })\n            .catch((err) => {\n                if (err.response && err.response.status === 401)\n                    setErrorMessage(\"Ошибка авторизации\");\n                else\n                    setErrorMessage(err.message);\n                setLoggingIn(false);\n            })\n    }\n\n    return (\n        <div className=\"col-md-6 me-0\">\n            {error_message &&\n                <div className=\"alert alert-danger mt-1 me-0 ms-0\">{error_message}</div>}\n            <h2>Вход</h2>\n            <form name=\"form\" onSubmit={handleSubmit}>\n                <div className=\"form-group\">\n                    <label htmlFor=\"username\">Логин</label>\n                    <input type=\"text\" className={'form-control' + (submitted && !username ? ' is-invalid' : '')}\n                        name=\"username\" value={username}\n                        onChange={handleChangeLogin} />\n                    {submitted && !username && <div className=\"help-block text-danger\">Введите имя пользователя</div>}\n                </div>\n                <div className=\"form-group\">\n                    <label htmlFor=\"password\">Пароль</label>\n                    <input type=\"password\" className={'form-control' + (submitted && !password ? ' is-invalid' : '')}\n                        name=\"password\" value={password}\n                        onChange={handleChangePassword} />\n                    {submitted && !password && <div className=\"help-block text-danger\">Введите пароль</div>}\n                </div>\n                <div className=\"form-group mt-2\">\n                    <button className=\"btn btn-primary\">\n                        {loggingIn && <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>}\n                        Вход\n                    </button>\n                </div>\n            </form>\n        </div>\n    );\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}